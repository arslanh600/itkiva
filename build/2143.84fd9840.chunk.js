(self.webpackChunkiktva_strapi_api=self.webpackChunkiktva_strapi_api||[]).push([[2143],{75143:function(u,h){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(i){for(var a,r=1,s=arguments.length;r<s;r++){a=arguments[r];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])}return i},n.apply(this,arguments)},e=this&&this.__awaiter||function(i,a,r,s){function o(t){return t instanceof r?t:new r(function(l){l(t)})}return new(r||(r=Promise))(function(t,l){function d(E){try{L(s.next(E))}catch(I){l(I)}}function m(E){try{L(s.throw(E))}catch(I){l(I)}}function L(E){E.done?t(E.value):o(E.value).then(d,m)}L((s=s.apply(i,a||[])).next())})},c=this&&this.__generator||function(i,a){var r={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},s,o,t,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(L){return function(E){return m([L,E])}}function m(L){if(s)throw new TypeError("Generator is already executing.");for(;r;)try{if(s=1,o&&(t=L[0]&2?o.return:L[0]?o.throw||((t=o.return)&&t.call(o),0):o.next)&&!(t=t.call(o,L[1])).done)return t;switch(o=0,t&&(L=[L[0]&2,t.value]),L[0]){case 0:case 1:t=L;break;case 4:return r.label++,{value:L[1],done:!1};case 5:r.label++,o=L[1],L=[0];continue;case 7:L=r.ops.pop(),r.trys.pop();continue;default:if(t=r.trys,!(t=t.length>0&&t[t.length-1])&&(L[0]===6||L[0]===2)){r=0;continue}if(L[0]===3&&(!t||L[1]>t[0]&&L[1]<t[3])){r.label=L[1];break}if(L[0]===6&&r.label<t[1]){r.label=t[1],t=L;break}if(t&&r.label<t[2]){r.label=t[2],r.ops.push(L);break}t[2]&&r.ops.pop(),r.trys.pop();continue}L=a.call(i,r)}catch(E){L=[6,E],o=0}finally{s=t=0}if(L[0]&5)throw L[1];return{value:L[0]?L[1]:void 0,done:!0}}},g=this&&this.__spreadArray||function(i,a,r){if(r||arguments.length===2)for(var s=0,o=a.length,t;s<o;s++)(t||!(s in a))&&(t||(t=Array.prototype.slice.call(a,0,s)),t[s]=a[s]);return i.concat(t||Array.prototype.slice.call(a))};Object.defineProperty(h,"__esModule",{value:!0});var p=function(){function i(){}return Object.defineProperty(i,"get",{enumerable:!1,configurable:!0,writable:!0,value:function(a){return e(this,void 0,void 0,function(){var r,s;return c(this,function(o){switch(o.label){case 0:return r=a.options?"?".concat(i.getQueryString(a.options)):"",[4,fetch("".concat(a.url).concat(r),{method:"GET",headers:n({Authorization:"Bearer ".concat(a.projectToken)},a.headers)}).catch(function(t){throw t})];case 1:return s=o.sent(),[2,s.json()]}})})}}),Object.defineProperty(i,"getBlob",{enumerable:!1,configurable:!0,writable:!0,value:function(a){return e(this,void 0,void 0,function(){var r;return c(this,function(s){switch(s.label){case 0:return[4,fetch("".concat(a.url),{method:"GET",headers:n({Authorization:"Bearer ".concat(a.projectToken),"Response-Type":"blob"},a.headers)}).catch(function(o){throw o})];case 1:return r=s.sent(),[2,r.blob()]}})})}}),Object.defineProperty(i,"post",{enumerable:!1,configurable:!0,writable:!0,value:function(a){return e(this,void 0,void 0,function(){var r,s;return c(this,function(o){switch(o.label){case 0:return a.rawData?r=a.rawData:a.options&&(r=JSON.stringify(a.options)),[4,fetch("".concat(a.url),{method:"POST",headers:n({Authorization:"Bearer ".concat(a.projectToken),"Content-Type":"application/json"},a.headers),body:r}).catch(function(t){throw t})];case 1:return s=o.sent(),[2,s.json()]}})})}}),Object.defineProperty(i,"put",{enumerable:!1,configurable:!0,writable:!0,value:function(a){return e(this,void 0,void 0,function(){var r,s;return c(this,function(o){switch(o.label){case 0:return a.rawData?r=a.rawData:a.options&&(r=JSON.stringify(a.options)),[4,fetch("".concat(a.url),{method:"PUT",headers:n({Authorization:"Bearer ".concat(a.projectToken),"Content-Type":"application/json"},a.headers),body:r}).catch(function(t){throw t})];case 1:return s=o.sent(),[2,s.json()]}})})}}),Object.defineProperty(i,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(a){return e(this,void 0,void 0,function(){var r;return c(this,function(s){switch(s.label){case 0:return[4,fetch("".concat(a.url),{method:"DELETE",headers:n({Authorization:"Bearer ".concat(a.projectToken)},a.headers)}).catch(function(o){throw o})];case 1:return r=s.sent(),[2,r.json()]}})})}}),Object.defineProperty(i,"getQueryString",{enumerable:!0,configurable:!0,writable:!0,value:function(a){return Object.entries(a).reduce(function(r,s){var o=s[0],t=s[1];return g(g([],r,!0),["".concat(encodeURIComponent(o),"=").concat(encodeURIComponent(t))],!1)},[]).join("&")}}),i}();h.default=p},8641:function(u,h,n){"use strict";var e=this&&this.__awaiter||function(s,o,t,l){function d(m){return m instanceof t?m:new t(function(L){L(m)})}return new(t||(t=Promise))(function(m,L){function E(T){try{A(l.next(T))}catch(S){L(S)}}function I(T){try{A(l.throw(T))}catch(S){L(S)}}function A(T){T.done?m(T.value):d(T.value).then(E,I)}A((l=l.apply(s,o||[])).next())})},c=this&&this.__generator||function(s,o){var t={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},l,d,m,L;return L={next:E(0),throw:E(1),return:E(2)},typeof Symbol=="function"&&(L[Symbol.iterator]=function(){return this}),L;function E(A){return function(T){return I([A,T])}}function I(A){if(l)throw new TypeError("Generator is already executing.");for(;t;)try{if(l=1,d&&(m=A[0]&2?d.return:A[0]?d.throw||((m=d.return)&&m.call(d),0):d.next)&&!(m=m.call(d,A[1])).done)return m;switch(d=0,m&&(A=[A[0]&2,m.value]),A[0]){case 0:case 1:m=A;break;case 4:return t.label++,{value:A[1],done:!1};case 5:t.label++,d=A[1],A=[0];continue;case 7:A=t.ops.pop(),t.trys.pop();continue;default:if(m=t.trys,!(m=m.length>0&&m[m.length-1])&&(A[0]===6||A[0]===2)){t=0;continue}if(A[0]===3&&(!m||A[1]>m[0]&&A[1]<m[3])){t.label=A[1];break}if(A[0]===6&&t.label<m[1]){t.label=m[1],m=A;break}if(m&&t.label<m[2]){t.label=m[2],t.ops.push(A);break}m[2]&&t.ops.pop(),t.trys.pop();continue}A=o.call(s,t)}catch(T){A=[6,T],d=0}finally{l=m=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},g=this&&this.__rest||function(s,o){var t={};for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&o.indexOf(l)<0&&(t[l]=s[l]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,l=Object.getOwnPropertySymbols(s);d<l.length;d++)o.indexOf(l[d])<0&&Object.prototype.propertyIsEnumerable.call(s,l[d])&&(t[l[d]]=s[l[d]]);return t},p=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(h,"__esModule",{value:!0});var i=p(n(75143)),a=function(){function s(o){Object.defineProperty(this,"projectToken",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"baseUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.projectToken=o.projectToken,this.baseUrl=o.baseUrl||""}return Object.defineProperty(s.prototype,"listProjects",{enumerable:!1,configurable:!0,writable:!0,value:function(o,t){return o===void 0&&(o={}),t===void 0&&(t={}),e(this,void 0,void 0,function(){return c(this,function(l){return[2,i.default.get({url:"".concat(t.baseUrl||this.baseUrl,"/projects"),projectToken:t.projectToken||this.projectToken,options:o,headers:t.headers})]})})}}),Object.defineProperty(s.prototype,"import",{enumerable:!1,configurable:!0,writable:!0,value:function(o,t){return t===void 0&&(t={}),e(this,void 0,void 0,function(){var l,d;return c(this,function(m){return l=o.projectId,d=g(o,["projectId"]),[2,i.default.post({url:"".concat(t.baseUrl||this.baseUrl,"/projects/").concat(l,"/import"),projectToken:t.projectToken||this.projectToken,options:d,headers:t.headers})]})})}}),Object.defineProperty(s.prototype,"listFormats",{enumerable:!1,configurable:!0,writable:!0,value:function(o){return o===void 0&&(o={}),e(this,void 0,void 0,function(){return c(this,function(t){return[2,i.default.get({url:"".concat(o.baseUrl||this.baseUrl,"/import/formats"),projectToken:o.projectToken||this.projectToken,headers:o.headers})]})})}}),Object.defineProperty(s.prototype,"listFiles",{enumerable:!1,configurable:!0,writable:!0,value:function(o,t){return t===void 0&&(t={}),e(this,void 0,void 0,function(){var l;return c(this,function(d){return l=o.projectId,[2,i.default.get({url:"".concat(t.baseUrl||this.baseUrl,"/projects/").concat(l,"/files"),projectToken:t.projectToken||this.projectToken,headers:t.headers})]})})}}),Object.defineProperty(s.prototype,"getFileContents",{enumerable:!1,configurable:!0,writable:!0,value:function(o,t){return t===void 0&&(t={}),e(this,void 0,void 0,function(){var l,d,m;return c(this,function(L){return l=o.projectId,d=o.fileId,m=o.lang,[2,i.default.getBlob({url:"".concat(t.baseUrl||this.baseUrl,"/projects/").concat(l,"/files/").concat(d,"/download/").concat(m),projectToken:t.projectToken||this.projectToken,headers:t.headers})]})})}}),Object.defineProperty(s.prototype,"listKeysInFileForLanguage",{enumerable:!1,configurable:!0,writable:!0,value:function(o,t){return t===void 0&&(t={}),e(this,void 0,void 0,function(){var l,d,m,L;return c(this,function(E){return l=o.projectId,d=o.fileId,m=o.lang,L=g(o,["projectId","fileId","lang"]),[2,i.default.get({url:"".concat(t.baseUrl||this.baseUrl,"/projects/").concat(l,"/files/").concat(d,"/keys/").concat(m),projectToken:t.projectToken||this.projectToken,options:L,headers:t.headers})]})})}}),Object.defineProperty(s.prototype,"listWebhooks",{enumerable:!1,configurable:!0,writable:!0,value:function(o,t){return t===void 0&&(t={}),e(this,void 0,void 0,function(){var l;return c(this,function(d){return l=o.projectId,[2,i.default.get({url:"".concat(t.baseUrl||this.baseUrl,"/projects/").concat(l,"/webhooks"),projectToken:t.projectToken||this.projectToken,headers:t.headers})]})})}}),Object.defineProperty(s.prototype,"postWebhooks",{enumerable:!1,configurable:!0,writable:!0,value:function(o,t){return t===void 0&&(t={}),e(this,void 0,void 0,function(){var l;return c(this,function(d){return l=o.projectId,[2,i.default.post({url:"".concat(t.baseUrl||this.baseUrl,"/projects/").concat(l,"/webhooks"),projectToken:t.projectToken||this.projectToken,options:o.webhooks,headers:t.headers})]})})}}),Object.defineProperty(s.prototype,"getWebhooksSecret",{enumerable:!1,configurable:!0,writable:!0,value:function(o,t){return t===void 0&&(t={}),e(this,void 0,void 0,function(){var l;return c(this,function(d){return l=o.projectId,[2,i.default.get({url:"".concat(t.baseUrl||this.baseUrl,"/projects/").concat(l,"/webhooks/secret"),projectToken:t.projectToken||this.projectToken,headers:t.headers})]})})}}),Object.defineProperty(s.prototype,"listScreenshots",{enumerable:!1,configurable:!0,writable:!0,value:function(o,t){return t===void 0&&(t={}),e(this,void 0,void 0,function(){var l;return c(this,function(d){return l=o.projectId,[2,i.default.get({url:"".concat(t.baseUrl||this.baseUrl,"/projects/").concat(l,"/screenshots"),projectToken:t.projectToken||this.projectToken,headers:t.headers})]})})}}),Object.defineProperty(s.prototype,"listScreenshotsTags",{enumerable:!1,configurable:!0,writable:!0,value:function(o,t){return t===void 0&&(t={}),e(this,void 0,void 0,function(){var l;return c(this,function(d){return l=o.projectId,[2,i.default.get({url:"".concat(t.baseUrl||this.baseUrl,"/projects/").concat(l,"/screenshots/tags"),projectToken:t.projectToken||this.projectToken,headers:t.headers})]})})}}),Object.defineProperty(s.prototype,"postScreenshots",{enumerable:!1,configurable:!0,writable:!0,value:function(o,t){return t===void 0&&(t={}),e(this,void 0,void 0,function(){var l;return c(this,function(d){return l=o.projectId,[2,i.default.post({url:"".concat(t.baseUrl||this.baseUrl,"/projects/").concat(l,"/screenshots"),projectToken:t.projectToken||this.projectToken,rawData:o.rawScreenshot,headers:t.headers})]})})}}),Object.defineProperty(s.prototype,"postScreenshot",{enumerable:!1,configurable:!0,writable:!0,value:function(o,t){return t===void 0&&(t={}),e(this,void 0,void 0,function(){var l,d;return c(this,function(m){return l=o.projectId,d=o.screenshotId,[2,i.default.post({url:"".concat(t.baseUrl||this.baseUrl,"/projects/").concat(l,"/screenshots/").concat(d),projectToken:t.projectToken||this.projectToken,rawData:o.rawScreenshot,headers:t.headers})]})})}}),Object.defineProperty(s.prototype,"putScreenshot",{enumerable:!1,configurable:!0,writable:!0,value:function(o,t){return t===void 0&&(t={}),e(this,void 0,void 0,function(){var l,d;return c(this,function(m){return l=o.projectId,d=o.screenshotId,[2,i.default.put({url:"".concat(t.baseUrl||this.baseUrl,"/projects/").concat(l,"/screenshots/").concat(d),projectToken:t.projectToken||this.projectToken,options:o.screenshot,headers:t.headers})]})})}}),Object.defineProperty(s.prototype,"deleteScreenshot",{enumerable:!1,configurable:!0,writable:!0,value:function(o,t){return t===void 0&&(t={}),e(this,void 0,void 0,function(){var l,d;return c(this,function(m){return l=o.projectId,d=o.screenshotId,[2,i.default.delete({url:"".concat(t.baseUrl||this.baseUrl,"/projects/").concat(l,"/screenshots/").concat(d),projectToken:t.projectToken||this.projectToken,headers:t.headers})]})})}}),Object.defineProperty(s.prototype,"updateKey",{enumerable:!1,configurable:!0,writable:!0,value:function(o,t){return t===void 0&&(t={}),e(this,void 0,void 0,function(){var l,d,m;return c(this,function(L){return l=o.projectId,d=o.keyId,m=g(o,["projectId","keyId"]),[2,i.default.put({url:"".concat(t.baseUrl||this.baseUrl,"/projects/").concat(l,"/keys/").concat(d),projectToken:t.projectToken||this.projectToken,options:m,headers:t.headers})]})})}}),Object.defineProperty(s.prototype,"deleteKey",{enumerable:!1,configurable:!0,writable:!0,value:function(o,t){return t===void 0&&(t={}),e(this,void 0,void 0,function(){var l,d;return c(this,function(m){return l=o.projectId,d=o.keyId,[2,i.default.delete({url:"".concat(t.baseUrl||this.baseUrl,"/projects/").concat(l,"/keys/").concat(d),projectToken:t.projectToken||this.projectToken,headers:t.headers})]})})}}),s}();function r(s){return new a(s)}h.default=r},2143:(u,h,n)=>{"use strict";n.r(h),n.d(h,{default:()=>Jt});var e=n(67294),c=n(25741),g=n(95489),p=n(87229),i=n(56928),a=n(41580),r=n(45697),s=n.n(r),o=n(71893);const t=(0,o.default)(a.x)`
  display: grid;
  grid-template-columns: ${({hasSideNav:f})=>f?"auto 1fr":"1fr"};
`,l=(0,o.default)(a.x)`
  overflow-x: hidden;
`,d=({sideNav:f,children:y})=>e.createElement(t,{hasSideNav:Boolean(f)},f,e.createElement(l,{paddingBottom:10},y));d.defaultProps={sideNav:void 0},d.propTypes={children:r.node.isRequired,sideNav:r.node};var m=n(28225),L=n(99167),E=n(17062),I=n.n(E),A=n(15283),T=n(24966),S=n(53979),b=n(29728),k=n(85893);const B=f=>(0,k.jsx)("svg",{width:"1rem",height:"1rem",viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",...f,children:(0,k.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.571 5.85H10.43v8.47H2.487a.2.2 0 0 0-.14.343l9.512 9.401a.2.2 0 0 0 .282 0l9.513-9.401a.2.2 0 0 0-.14-.342H13.57V5.85ZM2.2 3.027a.2.2 0 0 1-.2-.2V.402c0-.11.09-.2.2-.2h19.6c.11 0 .2.09.2.2v2.423a.2.2 0 0 1-.2.2H2.2Z",fill:"#212134"})}),Z=B;var z=n(18986),Y=n(11047),H=n(70004),F=n(75515),D=n(84404);const q="/transfer",N=(0,D.Z)();class C{static async download(y={}){try{return(await N.post(`${q}/download`,y)).data}catch(v){throw v.data}}}const x=(0,D.Z)("/i18n");class j{static async getLocales(){try{return(await x.get("/locales")).data}catch(y){throw y}}}var M=n(99725);const G=f=>{if(!f)return null;const y=f.split("-"),v=y[0];if(y.length===3){const O=y[1],K=y[2];return`${v}_${K}#${O}`}if(y.length===2){const O=y[1];return O.toUpperCase()===O?`${v}_${O}`:`${v}#${O}`}return f.replace("-","_")},R=f=>{if(!f)return null;const y=f.indexOf("#");if(y>-1){const P=f.substring(y+1),O=f.substring(0,y).split("_"),K=O[0],J=O[1];return J?`${K}-${P}-${J.toUpperCase()}`:`${K}-${P}`}return f.replace("_","-")},ee=async(f=null,y=null)=>{try{if(f||(f=(await j.getLocales()).find(O=>!!O.isDefault)),!f)return!1;if(!y){const w=await M.Z.getConnectedProject();if(!w)return!1;const O=w.sourceLanguage;y=w.languages.find(K=>K.id===O)}if(!y)return!1;const v=f.code,P=R(y.code);return v===P}catch(v){return console.error(v.message),!1}};var X=n(7363),ne=n(9839);function te(f){const{t:y}=(0,m.$G)(),[v,P]=(0,e.useState)(f.report),w=O=>{const K=v;K.splice(O,1),P([...K])};return(0,e.useEffect)(()=>{P(f.report)},[f.report]),v?v.map((O,K)=>e.createElement(a.x,{key:O,marginTop:4,marginBottom:4},e.createElement(z.b,{key:O,onClose:()=>w(K),closeLabel:y("upload.close"),variant:"default"},O))):null}te.propTypes={report:s().array.isRequired};const ae=te;function U(){const{t:f}=(0,m.$G)(),y="https://localazy.com/docs/strapi",v=()=>{window.open(y,"_blank")};return e.createElement(b.z,{variant:"tertiary",onClick:v},f("upload.read_documentation"))}const _=U;var $=n(62966),le=n(19325),he=n(21618);const me=he.config.default.LOCALAZY_PLUGIN_CONNECTOR_API_URL,re=(f=null)=>{f===null&&(f=`${me}`);const y=le.Z.create({baseURL:f});return y.interceptors.request.use(async v=>(v.headers={Accept:"application/json","Content-Type":"application/json","X-Localazy-Plugin-Id":1},v),v=>{Promise.reject(v)}),y.interceptors.response.use(v=>v,v=>{throw v}),y},Se="/analytics",ve=re();class V{static async trackEvent(y,v){return(await ve.post(`${Se}/track`,{event:y,...v})).data}}class ue{static async trackAppConnected(y,v,P={}){try{const w=this.buildData(y,"Strapi Connected",v,P);await V.trackEvent(w.event,{...w.data,userId:y,category:"Project"})}catch(w){console.warn(w)}}static async trackAppDisconnected(y,v,P={}){try{const w=this.buildData(y,"Strapi Disconnected",v,P);await V.trackEvent(w.event,{...w.data,userId:y,category:"Project"})}catch(w){console.warn(w)}}static async trackUploadToLocalazy(y,v,P={}){try{const w=this.buildData(y,"Strapi Upload",v,P);await V.trackEvent(w.event,{...w.data,userId:y,category:"Project"})}catch(w){console.warn(w)}}static async trackDownloadToStrapi(y,v,P={}){try{const w=this.buildData(y,"Strapi Download",v,P);await V.trackEvent(w.event,{...w.data,userId:y,category:"Project"})}catch(w){console.warn(w)}}static buildData(y,v,P,w){return{event:v,data:{"User Id":y,"Project Id":P.id,"Project Name":P.name,...w}}}}var Ae=n(76136),gt=n(70282);const je=(0,gt.createBrowserHistory)({}),fe={ROOT:"",LOGIN:"login",UPLOAD:"upload",DOWNLOAD:"download",SETTINGS:"settings",CONTENT_TRANSFER_SETUP:"content-transfer-setup"},Ie=f=>{if(f===fe.CONTENT_TRANSFER_SETUP){je.push(`/admin/settings/${I()}/${f}`);return}je.push(`/admin/plugins/${I()}/${f}`)};var ft=n(5451);function He(f){const{t:y}=(0,m.$G)(),[v,P]=(0,e.useState)(!0),[w,O]=(0,e.useState)(!1),[K,J]=(0,e.useState)(!1),[oe,Q]=(0,e.useState)(!1),[W,de]=(0,e.useState)({}),[Le,se]=(0,e.useState)(!1),[ie]=(0,$.u)(),pe=()=>{window.open(ie.project.url,"_blank")},[ye,Ce]=(0,e.useState)([]),[Ee,ce]=(0,e.useState)([]),Be=be=>{const Te=(0,A.Z)(Ee);(0,T.Z)(Te,"download.uiLanguages",be),ce(Te);try{Ae.Z.updatePluginSettings(Te)}catch(Ye){console.error(Ye.message)}},ze=async()=>{se(!0);const be=await C.download();de(be),ue.trackDownloadToStrapi(ie.user.id,ie.project,{"Target Languages Codes":"all"}),se(!1),Q(!0)};return(0,e.useEffect)(()=>{async function be(){P(!0),O(await(0,X.Z)()),J(!await ee());const Te=await M.Z.getConnectedProject(),Ye=Te?.languages?.filter(qt=>qt.id!==Te.sourceLanguage)||[];Ce(Ye);const Qt=await Ae.Z.getPluginSettings();ce(Qt),Ae.Z.updatePluginSettings({defaultRoute:fe.DOWNLOAD}),P(!1)}be()},[]),e.createElement(e.Fragment,null,e.createElement(S.T,{title:f.title,subtitle:f.subtitle,primaryAction:e.createElement(b.z,{startIcon:e.createElement(Z,null),disabled:v||w||K,loading:Le,onClick:ze},y("download.download_to_strapi")),as:"h2"}),v&&e.createElement(L.Z,null,y("common.loading_content")),!v&&e.createElement(a.x,{paddingRight:10,paddingLeft:10},e.createElement(a.x,{background:"neutral0",paddingTop:6,paddingRight:7,paddingBottom:6,paddingLeft:7,hasRadius:!0,shadow:"tableShadow"},e.createElement(F.Z,{variant:"omega"},y("download.download_note_a")),e.createElement(F.Z,{variant:"omega",fontWeight:"semiBold"},y("download.download_note_b")),e.createElement("br",null),e.createElement("br",null),e.createElement(F.Z,{variant:"omega"},y("download.make_sure_note_a")),e.createElement(F.Z,{variant:"omega",fontWeight:"semiBold"},y("download.make_sure_note_b")),e.createElement(F.Z,{variant:"omega"},y("download.make_sure_note_c")),e.createElement(a.x,{paddingTop:6},e.createElement(ft.Z,{preselectedLanguages:Ee?.download?.uiLanguages||[],projectLanguages:ye,onChange:be=>Be(be),label:y("download.ui_languages"),hint:y("download.ui_languages_info"),placeholder:y("download.ui_languages_placeholder")})),e.createElement(a.x,{paddingTop:4,paddingBottom:4},e.createElement(H.i,null)),e.createElement(a.x,{marginTop:2},e.createElement(Y.k,{gap:"2"},e.createElement(b.z,{variant:"secondary",onClick:pe},y("download.translate_in_localazy")),e.createElement(_,null)))),oe&&e.createElement(a.x,{marginTop:4,marginBottom:4},e.createElement(z.b,{onClose:()=>Q(!1),closeLabel:y("download.close"),title:y("download.download_result"),variant:W.success?"success":"danger"},W.success?y("download.download_success"):y("download.download_failed"))),K&&e.createElement(a.x,{marginTop:4,marginBottom:4},e.createElement(z.b,{onClose:()=>J(!1),closeLabel:y("download.close"),title:y("download.languages_incompatible"),variant:"danger"},y("download.languages_incompatible_message"))),w&&e.createElement(a.x,{marginTop:4,marginBottom:4},e.createElement(z.b,{onClose:()=>O(!1),closeLabel:y("download.close"),title:y("download.content_types_model_changed"),variant:"default"},y("download.please_update_your_content"))),W.report&&W.report.length>0&&e.createElement(ae,{report:W.report})))}He.propTypes={title:s().string.isRequired,subtitle:s().string.isRequired};const yt=He;var Ue=n(11276);const ht=f=>(0,k.jsxs)("svg",{width:"1rem",height:"1rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...f,children:[(0,k.jsx)("path",{d:"M11.987 23.036v-.964H1.876V1.876h10.111V0H0v24h11.987v-.964Z",fill:"#212134"}),(0,k.jsx)("path",{d:"M8 11.2c0-.11.09-.2.2-.2h11.973l-5.445-5.445a.2.2 0 0 1 0-.283l1.13-1.13a.2.2 0 0 1 .283 0l7.718 7.717a.2.2 0 0 1 0 .282L16.14 19.86a.2.2 0 0 1-.282 0l-1.13-1.13a.2.2 0 0 1 0-.284L20.172 13H8.2a.2.2 0 0 1-.2-.2v-1.6Z",fill:"#212134"})]}),mt=ht;var xe=n(92367);function Ke(f){const{t:y}=(0,m.$G)(),[v,P]=(0,e.useState)(!1),w=async()=>{P(!0),xe.Z.deleteIdentity(),(0,$.Kj)(),P(!1),f.onResultFetched()};return e.createElement("div",null,e.createElement(b.z,{startIcon:e.createElement(mt,null),variant:"secondary",loading:v,onClick:w},y("login.logout_from_localazy")))}Ke.propTypes={onResultFetched:s().func.isRequired};const Lt=Ke;var We=n(74571);function Ge(f){return e.createElement(We.P,{padding:1,col:6,s:12},e.createElement(a.x,null,e.createElement(F.Z,{variant:"sigma",textColor:"neutral600",textTransform:"uppercase"},f.label)),e.createElement(a.x,null,e.createElement(F.Z,{variant:"omega",textColor:"neutral800",fontWeight:"semiBold"},f.value)))}Ge.propTypes={label:s().string.isRequired,value:s().string.isRequired};const Pe=Ge;var Xe=n(23620);function _e(f){return e.createElement(We.P,{padding:1,col:6,s:12},e.createElement(Xe.r,{href:f.to,isExternal:!0},e.createElement(F.Z,{variant:"sigma",textColor:"primary600",textTransform:"uppercase"},f.label)))}_e.propTypes={label:s().string.isRequired,to:s().string.isRequired};const vt=_e;function Et(){const{t:f}=(0,m.$G)();return e.createElement(a.x,null,e.createElement(F.Z,{variant:"omega",fontWeight:"semiBold"},f("settings.internationalization_plugin")),e.createElement(F.Z,{variant:"omega"},f("settings.has_to_be_installed")),e.createElement("br",null),e.createElement(F.Z,{variant:"omega"},f("settings.transfer_setup_message_a")),e.createElement(F.Z,{variant:"omega",fontWeight:"semiBold"},f("settings.transfer_setup_message_b")))}const Ve=Et,bt=(f,y=void 0)=>new Intl.NumberFormat("en-GB",y).format(f);function $e(f){const y=(0,c.useHistory)(),{t:v}=(0,m.$G)(),[P,w]=(0,e.useState)(!0),[O]=(0,$.u)(),K=O.project.url,[J,oe]=(0,e.useState)({});(0,e.useEffect)(()=>{async function W(){w(!0);const de=await M.Z.getConnectedProject();oe(de),Ae.Z.updatePluginSettings({defaultRoute:fe.SETTINGS}),w(!1)}W()},[]);const Q=()=>{ue.trackAppDisconnected(O.user.id,O.project),Ie(fe.LOGIN,y)};return e.createElement(e.Fragment,null,e.createElement(S.T,{title:f.title,subtitle:f.subtitle,primaryAction:e.createElement(Lt,{onResultFetched:Q}),as:"h2"}),(f.isLoading||P)&&e.createElement(L.Z,null,v("common.loading_content")),!(f.isLoading||P)&&e.createElement(a.x,{paddingRight:10,paddingLeft:10},e.createElement(a.x,{background:"neutral0",paddingTop:6,paddingRight:7,paddingBottom:6,paddingLeft:7,hasRadius:!0,shadow:"tableShadow"},e.createElement(Ue.r,{gap:{desktop:5,tablet:2,mobile:1}},e.createElement(Pe,{label:v("settings.connected_user"),value:O.user.name}),e.createElement(Pe,{label:v("settings.connected_project"),value:O.project.name}),e.createElement(Pe,{label:v("settings.remaining_organization_keys"),value:bt(J.organization.availableKeys-J.organization.usedKeys)}),e.createElement(vt,{label:v("settings.open_project_in_localazy"),to:K})),e.createElement(a.x,{paddingTop:4,paddingBottom:4},e.createElement(H.i,null)),e.createElement(Ve,null))))}$e.propTypes={title:s().string.isRequired,subtitle:s().string.isRequired,isLoading:s().bool},$e.defaultProps={isLoading:!1};const St=$e,At=f=>(0,k.jsx)("svg",{width:"1rem",height:"1rem",viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",...f,children:(0,k.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.571 18.272H10.43v-8.47H2.487a.2.2 0 0 1-.14-.343L11.858.058a.2.2 0 0 1 .282 0l9.513 9.4a.2.2 0 0 1-.14.343H13.57v8.47ZM2.2 21.095a.2.2 0 0 0-.2.2v2.424c0 .11.09.2.2.2h19.6a.2.2 0 0 0 .2-.2v-2.424a.2.2 0 0 0-.2-.2H2.2Z",fill:"#212134"})}),Je=At,wt="/transfer",Tt=(0,D.Z)();class It{static async upload(y={}){try{return(await Tt.post(`${wt}/upload`,y)).data}catch(v){throw v.data}}}async function Qe(){const y=(await j.getLocales()).find(v=>!!v.isDefault);return y||null}async function Pt(){const f=await M.Z.getConnectedProject();if(!f)return null;const y=f.sourceLanguage,v=f.languages.find(P=>P.id===y);return v||null}function qe(f){const{t:y}=(0,m.$G)(),[v,P]=(0,e.useState)(!0),[w,O]=(0,e.useState)(!1),[K,J]=(0,e.useState)(!1),[oe,Q]=(0,e.useState)(!1),[W,de]=(0,e.useState)({}),[Le,se]=(0,e.useState)(!1),[ie,pe]=(0,e.useState)(null),[ye,Ce]=(0,e.useState)(null),[Ee]=(0,$.u)(),ce=()=>{Ie(fe.CONTENT_TRANSFER_SETUP),window.location.reload()},Be=async()=>{se(!0);const ze=await It.upload();de(ze),ue.trackUploadToLocalazy(Ee.user.id,Ee.project,{"Source Language Code":ye.code}),se(!1),Q(!0)};return(0,e.useEffect)(()=>{async function ze(){P(!0),pe(await Qe()),Ce(await Pt()),O(await(0,X.Z)()),J(!await ee(ie,ye)),Ae.Z.updatePluginSettings({defaultRoute:fe.UPLOAD}),P(!1)}ze()},[]),e.createElement(e.Fragment,null,e.createElement(S.T,{title:f.title,subtitle:f.subtitle,primaryAction:e.createElement(b.z,{startIcon:e.createElement(Je,null),disabled:v||w||K,loading:Le,onClick:Be},y("upload.upload_to_localazy")),as:"h2"}),v&&e.createElement(L.Z,null,y("common.loading_content")),!v&&e.createElement(a.x,{paddingRight:10,paddingLeft:10},e.createElement(a.x,{background:"neutral0",paddingTop:6,paddingRight:7,paddingBottom:6,paddingLeft:7,hasRadius:!0,shadow:"tableShadow"},e.createElement(Ue.r,{gap:{desktop:5,tablet:2,mobile:1}},e.createElement(Pe,{label:y("upload.default_strapi_language"),value:ie.name}),e.createElement(Pe,{label:y("upload.localazy_source_language"),value:ye.name})),e.createElement(a.x,{paddingTop:4,paddingBottom:4},e.createElement(H.i,null)),e.createElement(Ve,null),e.createElement(a.x,{marginTop:4},e.createElement(Y.k,{gap:"2"},e.createElement(b.z,{variant:"secondary",onClick:ce},y("upload.change_settings")),e.createElement(_,null)))),oe&&e.createElement(a.x,{marginTop:4,marginBottom:4},e.createElement(z.b,{onClose:()=>Q(!1),closeLabel:y("upload.close"),title:y("upload.upload_result"),variant:W.success?"success":"danger"},W.success?y("upload.upload_success"):y("upload.upload_failed"))),K&&e.createElement(a.x,{marginTop:4,marginBottom:4},e.createElement(z.b,{onClose:()=>J(!1),closeLabel:y("upload.close"),title:y("upload.languages_incompatible"),variant:"danger"},y("upload.languages_incompatible_message"))),w&&e.createElement(a.x,{marginTop:4,marginBottom:4},e.createElement(z.b,{onClose:()=>O(!1),closeLabel:y("upload.close"),title:y("upload.content_types_model_changed"),variant:"default"},y("upload.please_update_your_content"))),W.report&&W.report.length>0&&e.createElement(ae,{report:W.report})))}qe.propTypes={title:s().string.isRequired,subtitle:s().string.isRequired};const Ct=qe,et="/auth",tt=(0,D.Z)();class nt{static async generateKeys(){try{return(await tt.get(`${et}/generate-keys`)).data}catch(y){throw y}}static async continuousPoll(y){try{return(await tt.get(`${et}/continuous-poll?readKey=${y}`)).data}catch(v){throw v}}}function ot(f){const{t:y}=(0,m.$G)(),[v,P]=(0,e.useState)(!1),w=async()=>{P(!0);const O=await Qe(),K=G(O.code),J=await nt.generateKeys(),oe=new URLSearchParams({client_id:he.config.default.LOCALAZY_OAUTH_APP_CLIENT_ID,custom_id:J.writeKey,allow_create:"true",create_locale:K}),Q=`${he.config.default.LOCALAZY_OAUTH_URL}?${oe.toString()}`;window.open(Q);const W=await nt.continuousPoll(J.readKey);P(!1),f.onResultFetched(W)};return e.createElement("div",null,e.createElement(b.z,{variant:"default",size:"L",loading:v,onClick:w},y("login.login_with_localazy")))}ot.propTypes={onResultFetched:s().func.isRequired};const zt=ot;function ke(f){const y=(0,c.useHistory)(),{t:v}=(0,m.$G)(),P="https://localazy.com/docs/strapi",w=async O=>{await xe.Z.updateIdentity(O),(0,$.Kj)(O),O.accessToken&&(ue.trackAppConnected(O.user.id,O.project),Ie(fe.DOWNLOAD,y))};return e.createElement(e.Fragment,null,e.createElement(S.T,{title:f.title,subtitle:f.subtitle,as:"h1"}),f.isLoading&&e.createElement(L.Z,null,v("common.loading_content")),!f.isLoading&&e.createElement(a.x,{marginLeft:10,marginRight:10,background:"neutral0",paddingTop:6,paddingRight:7,paddingBottom:6,paddingLeft:7,hasRadius:!0,shadow:"tableShadow"},e.createElement(a.x,null,e.createElement(F.Z,{variant:"epsilon",textColor:"neutral600"},v("common.localazy_plugin_description"),e.createElement("br",null),v("login.login_and_start_translating_your_project"),e.createElement("br",null),e.createElement("br",null),v("login.you_have_to_own_account_for_the_plugin_to_work_properly"))),e.createElement(a.x,{paddingTop:6},e.createElement(zt,{onResultFetched:w})),e.createElement(a.x,{paddingTop:6},e.createElement(Xe.r,{href:P,isExternal:!0},e.createElement(F.Z,{variant:"sigma",textColor:"primary600"},v("login.read_the_documentation"))))))}ke.propTypes={title:s().string.isRequired,subtitle:s().string.isRequired,isLoading:s().bool},ke.defaultProps={isLoading:!1};const jt=ke,Ot=`${232/16}rem`,Ut=(0,o.default)(Ue.r)`
  width: ${Ot};
  background: ${({theme:f})=>f.colors.neutral100};
  position: sticky;
  top: 0;
  height: 100vh;
  overflow-y: auto;
  border-right: 1px solid ${({theme:f})=>f.colors.neutral200};
  z-index: 1;
`,at=({ariaLabel:f,...y})=>e.createElement(Ut,{"aria-label":f,as:"nav",...y});at.propTypes={ariaLabel:r.string.isRequired};var Re=n(41363),xt=n(7801),st=n(2504),$t=n(96556),kt=n(12028),Rt=n(49123),Dt=n(8509);const rt=(0,o.default)(H.i)`
  width: ${24/16}rem;
  background-color: ${({theme:f})=>f.colors.neutral200};
`,De=({as:f,label:y,searchLabel:v,searchable:P,onChange:w,value:O,onClear:K,onSubmit:J,id:oe})=>{const[Q,W]=(0,e.useState)(!1),de=(0,$t.D)(Q),Le=(0,st.M)(oe),se=(0,e.useRef)(),ie=(0,e.useRef)();(0,e.useEffect)(()=>{Q&&se.current&&se.current.focus(),de&&!Q&&ie.current&&ie.current.focus()},[Q,de]);const pe=()=>{W(ce=>!ce)},ye=ce=>{K(ce),se.current.focus()},Ce=ce=>{ce.relatedTarget?.id!==Le&&W(!1)},Ee=ce=>{ce.key===xt.y.ESCAPE&&W(!1)};return Q?e.createElement(a.x,{paddingLeft:4,paddingTop:5,paddingBottom:2,paddingRight:4},e.createElement(Dt.U,null,e.createElement(Rt.w,{name:"searchbar",value:O,onChange:w,placeholder:"e.g: strapi-plugin-abcd",onKeyDown:Ee,ref:se,onBlur:Ce,onClear:ye,onSubmit:J,clearLabel:"Clear",size:"S"},v)),e.createElement(a.x,{paddingLeft:2,paddingTop:4},e.createElement(rt,null))):e.createElement(a.x,{paddingLeft:6,paddingTop:6,paddingBottom:2,paddingRight:4},e.createElement(Y.k,{justifyContent:"space-between",alignItems:"flex-start"},e.createElement(F.Z,{variant:"beta",as:f},y),P&&e.createElement(kt.h,{ref:ie,onClick:pe,label:v,icon:e.createElement(Re.Search,null)})),e.createElement(a.x,{paddingTop:4},e.createElement(rt,null)))};De.defaultProps={as:"h2",searchable:!1,onChange(){},onClear(){},onSubmit(){},value:"",searchLabel:"",id:void 0},De.propTypes={as:r.string,id:r.string,label:r.string.isRequired,onChange:r.func,onClear:r.func,onSubmit:r.func,searchLabel:r.string,searchable:r.bool,value:r.string};const it=({children:f,spacing:y=2,horizontal:v=!1,...P})=>e.createElement(a.x,{paddingTop:2,paddingBottom:4},e.createElement(Y.k,{as:"ol",gap:y,direction:v?"row":"column",alignItems:v?"center":"stretch",...P},e.Children.map(f,(w,O)=>e.createElement("li",{key:O},w))));it.propTypes={children:r.node.isRequired};const ct=(0,o.default)(Y.k)`
  border: none;
  padding: 0;
  background: transparent;
`,Nt=o.default.div`
  display: flex;
  align-items: center;
  transform: rotateX(${({rotated:f})=>f?"0deg":"180deg"});
`,Ne=({collapsable:f,label:y,onClick:v,ariaExpanded:P,ariaControls:w})=>f?e.createElement(ct,{as:"button",onClick:v,"aria-expanded":P,"aria-controls":w,textAlign:"left"},e.createElement(a.x,{paddingRight:1},e.createElement(F.Z,{variant:"sigma",textColor:"neutral600"},y)),f&&e.createElement(Nt,{rotated:P},e.createElement(Re.CarretDown,{"aria-hidden":!0}))):e.createElement(ct,null,e.createElement(a.x,{paddingRight:1},e.createElement(F.Z,{variant:"sigma",textColor:"neutral600"},y)));Ne.defaultProps={ariaControls:null,ariaExpanded:null,collapsable:!1,onClick(){}},Ne.propTypes={ariaControls:r.string,ariaExpanded:r.bool,collapsable:r.bool,label:r.string.isRequired,onClick:r.func};var Ft=n(30190);const Zt=(0,o.default)(a.x)`
  svg {
    height: ${4/16}rem;
    path {
      fill: ${({theme:f})=>f.colors.neutral500};
    }
  }
`,Fe=({collapsable:f,label:y,badgeLabel:v,children:P,id:w})=>{const[O,K]=(0,e.useState)(!0),J=(0,st.M)(w),oe=()=>{K(Q=>!Q)};return e.createElement(Y.k,{direction:"column",alignItems:"stretch",gap:1},e.createElement(Zt,{paddingLeft:6,paddingTop:1,paddingBottom:1,paddingRight:4},e.createElement(a.x,{position:"relative",paddingRight:v?6:0},e.createElement(Ne,{onClick:oe,ariaExpanded:O,ariaControls:J,collapsable:f,label:y}),v&&e.createElement(Ft.C,{backgroundColor:"neutral150",textColor:"neutral600",position:"absolute",right:0,top:"50%",transform:"translateY(-50%)"},v))),(!f||O)&&e.createElement("ol",{id:J},e.Children.map(P,(Q,W)=>e.createElement("li",{key:W},Q))))};Fe.defaultProps={badgeLabel:null,children:void 0,collapsable:!1,id:void 0},Fe.propTypes={badgeLabel:r.string,children:r.node,collapsable:r.bool,id:r.string,label:r.string.isRequired};const Mt=(0,o.default)(a.x)`
  display: flex;
  align-items: center;
  justify-content: space-between;
  text-decoration: none;
  color: ${({theme:f})=>f.colors.neutral800};
  svg > * {
    fill: ${({theme:f})=>f.colors.neutral600};
  }

  &.active {
    ${({theme:f})=>`
      background-color: ${f.colors.primary100};
      border-right: 2px solid ${f.colors.primary600};
      svg > * {
        fill: ${f.colors.primary700};
      }
      ${F.Z} {
        color: ${f.colors.primary700};
        font-weight: 500;
      }
      `}
  }

  &:focus-visible {
    outline-offset: -2px;
  }
`,lt=(0,o.default)(Re.Dot)`
  width: ${12/16}rem;
  height: ${4/16}rem;
  * {
    fill: ${({theme:f,$active:y})=>y?f.colors.primary600:f.colors.neutral600};
  }
`,Bt=o.default.div`
  svg {
    height: ${12/16}rem;
    width: ${12/16}rem;
  }
`,Oe=({children:f,icon:y,withBullet:v,isSubSectionChild:P,...w})=>e.createElement(Mt,{as:c.NavLink,icon:y,background:"neutral100",paddingLeft:P?9:7,paddingBottom:2,paddingTop:2,...w},e.createElement(Y.k,null,y?e.createElement(Bt,null,y):e.createElement(lt,null),e.createElement(a.x,{paddingLeft:2},e.createElement(F.Z,{as:"span"},f))),v&&e.createElement(a.x,{as:Y.k,paddingRight:4},e.createElement(lt,{$active:!0})));Oe.displayName="SubNavLink",Oe.defaultProps={icon:null,isSubSectionChild:!1,withBullet:!1},Oe.propTypes={children:r.node.isRequired,icon:r.element,isSubSectionChild:r.bool,withBullet:r.bool};const Yt=f=>(0,k.jsx)("svg",{width:"1rem",height:"1rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...f,children:(0,k.jsx)("path",{d:"M20 20a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-9H1l10.327-9.388a1 1 0 0 1 1.346 0L23 11h-3v9Z",fill:"#212134"})}),Ht=Yt,Ze=`/admin/plugins/${I()}`,we=ne.Z.t,Me=()=>[{id:"settings",label:we("common.settings"),description:we("settings.description"),icon:e.createElement(Ht,null),to:`${Ze}/settings`},{id:"upload",label:we("common.upload_to_localazy"),description:we("upload.description"),icon:e.createElement(Je,null),to:`${Ze}/upload`},{id:"download",label:we("common.download_to_strapi"),description:we("download.description"),icon:e.createElement(Z,null),to:`${Ze}/download`}];function Kt(){const{t:f}=(0,m.$G)(),y=Me();return e.createElement(at,{ariaLabel:f("common.localazy_plugin")},e.createElement(De,{label:f("common.localazy_plugin")}),e.createElement(it,null,e.createElement(Fe,{label:f("common.navigation")},y.map(v=>e.createElement(Oe,{as:c.NavLink,to:v.to,active:v.active,icon:v.icon||"",key:v.id},v.label)))))}const Wt=Kt,Gt=(f,y="")=>y?f.pathname.endsWith(`${I()}/${y}`)||f.pathname.endsWith(`${I()}/${y}/`):f.pathname.endsWith(I())||f.pathname.endsWith(`${I()}/`),ut=ne.Z.t,dt=(f=null)=>{f||(f=(0,c.useLocation)());const y=f.pathname.split(`/${I()}/`)[1];return y&&Me().find(w=>y.includes(w.id))?.label||ut("common.localazy_plugin_hand")},pt=(f=null)=>{f||(f=(0,c.useLocation)());const y=f.pathname.split(`/${I()}/`)[1];return y&&Me().find(w=>y.includes(w.id))?.description||""};function Xt(){const f=(0,c.useLocation)(),{t:y}=(0,m.$G)(),[v,P]=(0,e.useState)(!0),[w,O]=(0,e.useState)(!1),[K,J]=(0,e.useState)(!1),[oe,Q]=(0,e.useState)(dt(f)),[W,de]=(0,e.useState)(pt(f)),[Le]=(0,$.u)(),se=()=>!!Le.accessToken;return(0,e.useEffect)(()=>je.listen(pe=>{Q(dt(pe)),de(pt(pe))}),[]),(0,e.useEffect)(()=>{async function ie(){P(!0);const pe=await xe.Z.getIdentity();if((0,$.Kj)(pe),O(se()),J(se()),P(!1),Gt(f))if(!se())Ie(fe.LOGIN);else{const ye=(await Ae.Z.getPluginSettings()).defaultRoute||fe.UPLOAD;Ie(ye)}}ie()},[Le.accessToken]),e.createElement(c.Router,{history:je},e.createElement(p.f,{theme:i.W},e.createElement(a.x,{background:"neutral100"},e.createElement(d,{sideNav:K&&e.createElement(Wt,null)},v&&e.createElement(L.Z,null,y("common.loading_content")),!v&&e.createElement(e.Fragment,null,!w&&e.createElement(c.Switch,null,e.createElement(c.Route,{path:`/admin/plugins/${I()}/login`,exact:!0},e.createElement(jt,{title:oe,subtitle:W}))),w&&e.createElement(c.Switch,null,e.createElement(c.Route,{path:`/admin/plugins/${I()}/download`,exact:!0},e.createElement(yt,{title:oe,subtitle:W})),e.createElement(c.Route,{path:`/admin/plugins/${I()}/upload`,exact:!0},e.createElement(Ct,{title:oe,subtitle:W})),e.createElement(c.Route,{path:`/admin/plugins/${I()}/settings`,exact:!0},e.createElement(St,{title:oe,subtitle:W})),e.createElement(c.Route,{component:g.NotFound})))))))}const _t=Xt;function Vt(){return e.createElement(_t,null)}const Jt=Vt},37277:(u,h,n)=>{"use strict";const e=n(70745),c=n(75651),g=n(88376),p=n(94743);u.exports=({strapi:i})=>{i.db.lifecycles.subscribe(async a=>{const r=new p(i),s=a.action;switch(s){case"beforeFindMany":case"beforeFindOne":{e(a);break}case"afterCreate":case"afterUpdate":try{if(r.isInitiatedByLocalazyWebhook()||r.isInitiatedByLocalazyPluginUI())break;c(a).then(o=>{typeof o<"u"&&i.log.info(`${s} hook result: ${JSON.stringify(o)}`)})}catch(o){i.log.error(o)}finally{break}case"beforeDeleteMany":case"beforeDelete":try{if(r.isInitiatedByLocalazyWebhook()||r.isInitiatedByLocalazyPluginUI())break;const o=await g(a);typeof o<"u"&&i.log.info(`${s} hook result: ${JSON.stringify(o)}`)}catch(o){i.log.error(o)}finally{break}default:break}})}},57921:u=>{"use strict";u.exports={LOCALAZY_OAUTH_URL:"https://testing.localazy.com/oauth/authorize",LOCALAZY_OAUTH_APP_CLIENT_ID:"18503917571895066466",LOCALAZY_PLUGIN_CONNECTOR_API_URL:"https://testing.localazy.com/plugin-connector",LOCALAZY_PUBLIC_API_URL:"https://testing.localazy.com/pubapi",LOCALAZY_PLUGIN_ID:"1",LOCALAZY_DEFAULT_FILE_NAME:"strapi.json",LOCALAZY_DEFAULT_FILE_PATH:"",LOCALAZY_DEFAULT_FILE_EXTENSION:"json",LOCALAZY_DEFAULT_LOCALE:"en",LOCALAZY_API_USER_JWT_COOKIE_NAME:"LOCALAZY-API-USER-JWT",LOCALAZY_API_USER_COOKIE_EXPIRATION:7,LOCALAZY_PUBLIC_API_LIFTED_LIMITS:!0}},90032:(u,h,n)=>{"use strict";let e=n(70872);({ADMIN_PATH:"/admin/",NODE_ENV:"production",STRAPI_ADMIN_BACKEND_URL:"",STRAPI_TELEMETRY_DISABLED:void 0}).STRAPI_ADMIN_LOCALAZY_ENV==="local"&&(e=n(89113)),{ADMIN_PATH:"/admin/",NODE_ENV:"production",STRAPI_ADMIN_BACKEND_URL:"",STRAPI_TELEMETRY_DISABLED:void 0}.STRAPI_ADMIN_LOCALAZY_ENV==="development"&&(e=n(57921)),u.exports={default:{...e||{}},validator(){}}},89113:u=>{"use strict";u.exports={LOCALAZY_OAUTH_URL:"https://testing.localazy.com/oauth/authorize",LOCALAZY_OAUTH_APP_CLIENT_ID:"18503917571895066465",LOCALAZY_PLUGIN_CONNECTOR_API_URL:"http://localhost:3000",LOCALAZY_PUBLIC_API_URL:"https://testing.localazy.com/pubapi",LOCALAZY_PLUGIN_ID:"1",LOCALAZY_DEFAULT_FILE_NAME:"strapi.json",LOCALAZY_DEFAULT_FILE_PATH:"",LOCALAZY_DEFAULT_FILE_EXTENSION:"json",LOCALAZY_DEFAULT_LOCALE:"en",LOCALAZY_API_USER_JWT_COOKIE_NAME:"LOCALAZY-API-USER-JWT",LOCALAZY_API_USER_COOKIE_EXPIRATION:7,LOCALAZY_PUBLIC_API_LIFTED_LIMITS:!1}},70872:u=>{"use strict";u.exports={LOCALAZY_OAUTH_URL:"https://localazy.com/oauth/authorize",LOCALAZY_OAUTH_APP_CLIENT_ID:"18395772851999073783",LOCALAZY_PLUGIN_CONNECTOR_API_URL:"https://plugins.localazy.com/generic-connector",LOCALAZY_PUBLIC_API_URL:"https://api.localazy.com",LOCALAZY_PLUGIN_ID:"1",LOCALAZY_DEFAULT_FILE_NAME:"strapi.json",LOCALAZY_DEFAULT_FILE_PATH:"",LOCALAZY_DEFAULT_FILE_EXTENSION:"json",LOCALAZY_DEFAULT_LOCALE:"en",LOCALAZY_API_USER_JWT_COOKIE_NAME:"LOCALAZY-API-USER-JWT",LOCALAZY_API_USER_COOKIE_EXPIRATION:7,LOCALAZY_PUBLIC_API_LIFTED_LIMITS:!0}},97091:u=>{"use strict";u.exports={}},72056:(u,h,n)=>{"use strict";const e=n(98276),c=n(3108),g=n(8670),p=n(27598),i=n(53608),a=n(60621),r=n(50256);u.exports={myController:e,localazyUserController:c,localazyAuthController:g,strapiController:p,pluginSettingsController:i,localazyTransferController:a,localazyProjectController:r}},8670:u=>{"use strict";u.exports={async generateKeys(h){h.body=await strapi.plugin("localazy").service("localazyAuthService").generateKeys()},async continuousPoll(h){const c=strapi.plugin("localazy").service("localazyAuthService");let g=1;const{readKey:p}=h.query;let i=await c.completeLogin(p),a={success:!1};i.completed||(a=await new Promise((r,s)=>{const o=setInterval(async()=>{i=await c.completeLogin(p),i.completed&&(clearInterval(o),r(i.data)),g+=1,g>=60&&(clearInterval(o),s(new Error("Sign in attempts timed out.")))},2e3)})),h.body=a}}},50256:u=>{"use strict";u.exports={async getConnectedProject(h){const n=strapi.plugin("localazy").service("localazyUserService"),e=strapi.plugin("localazy").service("localazyPubApiService"),c=await n.getUser(),g=await e.getProject(c.project.id,!0,!0);h.body=g}}},60621:(u,h,n)=>{"use strict";const e=n(1409),{getCollectionsNames:c,findSetupModelByCollectionName:g,findSetupModelByCollectionUid:p,isCollectionTransferEnabled:i,getPickPaths:a}=n(81980),r=n(67073),s=n(90032).default,{isoLocalazyToStrapi:o,isoStrapiToLocalazy:t}=n(90254),l=n(95141),d=n(36968),m=n(41609),L=n(62243),E=n(94743),I=n(7106),A=async T=>{const S=new I(strapi),b=new E(strapi);await S.setup();let k;if(b.isInitiatedByLocalazyWebhook())k=S.getWebhookLanguagesCodes();else if(b.isInitiatedByLocalazyPluginUI())k=S.getUiLanguagesCodes();else return strapi.log.warn("Called by an unknown initiator."),T;return m(k)?T:T.filter(B=>k.includes(B))};u.exports={async upload(T){try{let S=!0;const b=[],k=strapi.plugin("localazy").service("strapiService"),B=strapi.plugin("localazy").service("strapiI18nService"),Z=strapi.plugin("localazy").service("localazyUploadService"),z=await strapi.plugin("localazy").service("pluginSettingsService").getContentTransferSetup();if(!z.has_setup){const R="Content transfer setup is not set up.";strapi.log.info(R),b.push(R),S=!1,T.body={success:S,report:b};return}const{setup:Y}=z,H=c(Y),F=await k.getModels();let D={};for(const R of H){const ee=F.find($=>$.collectionName===R),X=ee.uid;if(!ee){strapi.log.warn(`Model with uid ${X} is not found.`);continue}const ne=g(Y,R);if(!i(Y,R)){const $=`Collection ${R} transfer is disabled.`;b.push($),strapi.log.info($);continue}const te=ne[R],ae=a(te);if(!ae.length){const $=`No fields for collection ${R} transfer are enabled.`;b.push($),strapi.log.warn($);continue}const U=ae.map($=>`${X}.${$}`);let _=await strapi.entityService.findMany(X,{populate:"deep"});if(_=L(_,["locale","localizations","createdAt","createdBy","updatedAt","updatedBy","publishedAt"]),!_){strapi.log.info(`No entries found for model ${X}`);continue}Array.isArray(_)||(_=[_]),_.forEach($=>{const le=e({[X]:$}),he=r(le,U,te);D={...D,...he}})}const N=(await B.getLocales(T)).find(R=>R.isDefault),C=N?t(N.code):s.LOCALAZY_DEFAULT_LOCALE,x=Z.splitToChunks(D),j=Z.createImportFileRepresentation(s.LOCALAZY_DEFAULT_FILE_NAME,s.LOCALAZY_DEFAULT_FILE_PATH,s.LOCALAZY_DEFAULT_FILE_EXTENSION,C,x),G=j.length>1?{}:{deprecate:"file"};await Z.upload(j,G),T.body={success:S,report:b}}catch(S){strapi.log.error(S.message),T.throw(400,S)}},async download(T){let S=!0;const b=[],k=strapi.plugin("localazy").service("strapiService"),B=strapi.plugin("localazy").service("strapiI18nService"),Z=strapi.plugin("localazy").service("localazyUserService"),z=strapi.plugin("localazy").service("localazyPubApiService"),Y=strapi.plugin("localazy").service("localazyDownloadService"),H=strapi.plugin("localazy").service("strapiLocalazyI18nService"),F=await strapi.plugin("localazy").service("pluginSettingsService").getContentTransferSetup(),D=await Z.getUser(),q=await z.getStrapiFile(D.project.id);if(!q){S=!1;const U=`File ${s.LOCALAZY_DEFAULT_FILE_NAME} not found`;strapi.log.error(U),b.push(U),T.body={success:S,report:b};return}const N=await z.getProject(D.project.id,!1,!0);if(!N){S=!1;const U=`Project ${D.project.id} not found`;strapi.log.error(U),b.push(U),T.body={success:S,report:b};return}const C=N.languages,x=N.sourceLanguage,j=N.languages.find(U=>U.id===x);if(!j){S=!1;const U="Source language not found";strapi.log.error(U),b.push(U),T.body={success:S,report:b};return}const M=j.code,G=C.filter(U=>U.code!==M);if(!G.length){const U="Your Localazy project is not translated to other languages.";strapi.log.info(U),b.push(U),T.body={success:S,report:b};return}let R=G.map(U=>U.code);R=await A(R);const ee=[];for(const U of R)try{const _=await B.createStrapiLocale(T,U);b.push(`Created locale ${_}`)}catch(_){_.name==="ApplicationError"&&_.message==="This locale already exists"?strapi.log.info(`The Localazy locale ${U} already exists.`):strapi.log.error(_.message),_.name==="ValidationError"&&(ee.push(U),b.push(`Language ${U} is not supported by Strapi`))}const X=R.filter(U=>!ee.includes(U)),ne={};for(const U of X){const _=o(U),$=await Y.download({projectId:D.project.id,fileId:q.id,lang:_});$.success||b.push($.message);const le=$.data;ne[U]=le}const te={},ae=await k.getModels();for(const[U,_]of Object.entries(ne)){const $=o(U);if(!$){b.push(`Language ${U} is not supported by Strapi`);continue}for(const le of _){const he=le.key[0],me=le.value,ge=B.parseLocalazyKey(he),re=p(F,ae,ge.uid);if(typeof re<"u"&&l(re,ge.rest)){const Se=ge.rest.map(V=>{const ue=V.indexOf(";");return ue===-1?V:V.substring(0,ue)}),ve=[$,ge.uid,ge.id,...Se];d(te,ve,me)}}}for(const[U,_]of Object.entries(te))for(const[$,le]of Object.entries(_)){if(!ae.find(me=>me.uid===$)){strapi.log.info(`Model ${$} not found in Strapi, it has been deleted, skipping...`);continue}for(const[me,ge]of Object.entries(le))try{const re=await strapi.entityService.findOne($,me,{populate:"deep"});if(m(re)){const V=`Source language entry ${$}[${me}] does not exist anymore, skipping...`;throw new Error(V)}const Se=re.localizations;if(!Array.isArray(Se))throw new Error(`Content type ${$} does not support localizations, skipping...`);const ve=Se.find(V=>V.locale===U);if(ve)try{const V=ve.id,ue=await H.updateEntry($,V,ae,ge,re,U);b.push(`Updated ${$}[${ue.id}] (${U})`),strapi.log.info(`Updated ${$}[${ue.id}] (${U})`)}catch(V){S=!1,strapi.log.error(V.message),b.push(`Cannot update an ${$}[${ve.id}] (${U}): ${V.message}`)}else try{const V=await H.createEntry(T,$,ae,ge,re,U);b.push(`Created new entry ${$}[${V.id}] in language ${U}`),strapi.log.info(`Created new entry ${$}[${V.id}] in language ${U}`)}catch(V){S=!1,strapi.log.error(V.message),b.push(`Cannot create an entry in ${U} for ${$}[${re.id}]: ${V.message}`)}}catch(re){S=!1,strapi.log.error(re.message),b.push(`An error occured while processing download: ${re.message}`)}}T.body={success:S,report:b}}}},3108:u=>{"use strict";u.exports={async getUser(h){h.body=await strapi.plugin("localazy").service("localazyUserService").getUser()},async updateUser(h){h.body=await strapi.plugin("localazy").service("localazyUserService").updateUser(h.request.body)},async deleteUser(h){h.body=await strapi.plugin("localazy").service("localazyUserService").deleteUser()}}},98276:u=>{"use strict";u.exports={index(h){h.body=strapi.plugin("localazy").service("myService").getWelcomeMessage()}}},53608:u=>{"use strict";u.exports={async getContentTransferSetup(h){h.body=await strapi.plugin("localazy").service("pluginSettingsService").getContentTransferSetup()},async updateContentTransferSetup(h){h.body=await strapi.plugin("localazy").service("pluginSettingsService").updateContentTransferSetup(h.request.body)},async getPluginSettings(h){h.body=await strapi.plugin("localazy").service("pluginSettingsService").getPluginSettings()},async updatePluginSettings(h){h.body=await strapi.plugin("localazy").service("pluginSettingsService").updatePluginSettings(h.request.body)}}},27598:u=>{"use strict";u.exports={async getModels(h){h.body=await strapi.plugin("localazy").service("strapiService").getModels()},async getLocalizableModels(h){h.body=await strapi.plugin("localazy").service("strapiService").getLocalizableModels()},async postLifecycleLocalazyWebhooks(h){strapi.log("done")}}},69164:u=>{"use strict";const h="content-transfer-setup",n={has_setup:!1,setup:[]};u.exports={KEY:h,emptyContentTransferSetup:n}},89190:u=>{"use strict";const h="identity",n={accessToken:"",project:{id:"",image:"",name:"",url:""},scope:"",user:{id:"",name:""}};u.exports={KEY:h,emptyIdentity:n}},14829:u=>{"use strict";const h="plugin-settings",n={defaultRoute:null};u.exports={KEY:h,emptyPluginSettings:n}},20752:u=>{"use strict";const h="localazy";u.exports=n=>n.store({environment:{ADMIN_PATH:"/admin/",NODE_ENV:"production",STRAPI_ADMIN_BACKEND_URL:"",STRAPI_TELEMETRY_DISABLED:void 0}.STRAPI_ADMIN_LOCALAZY_ENV,type:"plugin",name:h})},30742:u=>{"use strict";u.exports=()=>{}},95141:(u,h,n)=>{const e=n(27361),c=s=>s.find(o=>o.includes(";")),g=s=>!!c(s),p=s=>s.split(";")[1],i=s=>s.findIndex(o=>o.includes(";")),a=s=>{const o=i(s);if(o!==-1)return s[o-1]},r=(s,o)=>{if(!s.__model__)return!1;const t=c(o);if(t){const l=a(o),d=p(t),L=e(s,l).find(T=>T.__component__===d);if(!L)return!1;const E=i(o),A=o.slice(E+1).filter(T=>isNaN(parseInt(T)));return!!e(L,A)}else{const l=o.filter(d=>isNaN(parseInt(d)));return!!e(s,l)}};u.exports=r},21618:(u,h,n)=>{"use strict";const e=n(90058),c=n(37277),g=n(30742),p=n(90032),i=n(97091),a=n(72056),r=n(15380),s=n(12079),o=n(39148),t=n(22592);u.exports={register:e,bootstrap:c,destroy:g,config:p,controllers:a,routes:r,services:t,contentTypes:i,policies:o,middlewares:s}},70745:(u,h,n)=>{const e=n(19633);u.exports=c=>{const g=c.params?.populate;if(g&&g[0]==="deep"){const p=g[1]??5,i=e(c.model.uid,p);c.params.populate=i.populate}}},88376:(u,h,n)=>{"use strict";const e=n(28619),c=n(90032).default,g=n(828),p=n(48883);u.exports=async i=>{const a=await e(i);if(typeof a>"u")return;const{pickedFlatten:r,eventEntryLocale:s}=a,o=strapi.plugin("localazy").service("localazyUserService"),t=strapi.plugin("localazy").service("localazyPubApiService"),l=strapi.plugin("localazy").service("localazyDownloadService"),d=await o.getUser(),m=await t.getStrapiFile(d.project.id);if(!m){strapi.log.error(`File ${c.LOCALAZY_DEFAULT_FILE_NAME} not found`);return}const L=await l.download({projectId:d.project.id,fileId:m.id,lang:s}),E=Object.keys(r),I=L.data.filter(T=>E.includes(T.key[0])).map(T=>T.id),A=await g();for(const T of I)try{await A.updateKey({projectId:d.project.id,keyId:T,deprecated:0}),await p()}catch(S){strapi.log.error(S.message)}return{success:!0}}},75651:(u,h,n)=>{"use strict";const e=n(28619),c=n(90032).default;u.exports=async g=>{const p=await e(g);if(typeof p>"u")return;const{pickedFlatten:i,eventEntryLocale:a}=p,r=strapi.plugin("localazy").service("localazyUploadService"),s=r.splitToChunks(i),o=r.createImportFileRepresentation(c.LOCALAZY_DEFAULT_FILE_NAME,c.LOCALAZY_DEFAULT_FILE_PATH,c.LOCALAZY_DEFAULT_FILE_EXTENSION,a,s);return await r.upload(o)}},12079:(u,h,n)=>{"use strict";const e=n(56385);u.exports={verifyWebhook:e}},56385:(u,h,n)=>{"use strict";const e=n(49863),c=n(7106);u.exports=(g,{strapi:p})=>async(i,a)=>{try{const r=new c(p);if(await r.setup(),!r.shouldAllowWebhookDownloadProcess())throw new Error("Localazy Plugin: Webhook download process is disabled; terminating execution");const s=i.request.body;p.log.info(`Localazy Plugin: Webhook of type '${s.type}' procedure started`);const o=p.plugin("localazy").service("localazyPubApiService"),l=await p.plugin("localazy").service("localazyUserService").getUser(),d=await o.getWebhooksSecret(l.project.id),{secret:m}=d,L=i.request.header["x-localazy-hmac"],E=i.request.header["x-localazy-timestamp"],I=9e5,A=parseInt(E);if(Number.isNaN(A))throw new Error("Localazy Plugin: Webhook request invalid timestamp provided; terminating execution");if(A*1e3+I<Date.now())throw new Error("Localazy Plugin: Webhook request is older than threshold; terminating execution");const S=e.createHmac("sha256",m).update(`${E}-${JSON.stringify(s)}`).digest("hex");if(L!==S)throw new Error("Localazy Plugin: Webhook verification did not pass; terminating execution");if(!i.state.user){const b=r.getWebhookAuthorId();if(Number.isNaN(b))throw new Error("Localazy Plugin: Webhook author is not set; terminating execution");i.state.user={id:b}}await a(),p.log.info(`Localazy Plugin: Webhook of type '${s.type}' procedure finished`)}catch(r){p.log.warn(r.message),i.body={success:!1,message:r.message}}}},39148:u=>{"use strict";u.exports={}},90058:u=>{"use strict";u.exports=()=>{}},15380:(u,h,n)=>{"use strict";const e=n(74452),c=n(34840),g=n(70883),p=n(53480),i=n(79938),a=n(93376),r=n(74575);u.exports={"content-api":{type:"content-api",routes:[...p]},admin:{type:"admin",routes:[...c,...e,...g,...p,...i,...a]},localazyPublicTransferRoutes:r}},34840:u=>{"use strict";const h="/auth";u.exports=[{method:"GET",path:`${h}/generate-keys`,handler:"localazyAuthController.generateKeys",config:{policies:[]}},{method:"GET",path:`${h}/continuous-poll`,handler:"localazyAuthController.continuousPoll",config:{policies:[]}}]},93376:u=>{"use strict";const h="/project";u.exports=[{method:"GET",path:`${h}`,handler:"localazyProjectController.getConnectedProject",config:{policies:[]}}]},74575:u=>{"use strict";const h="/public/transfer";u.exports={routes:[{method:"POST",path:`${h}/download`,handler:"localazyTransferController.download",config:{policies:[],auth:!1,middlewares:["plugin::localazy.verifyWebhook"]}}]}},79938:u=>{"use strict";const h="/transfer";u.exports=[{method:"POST",path:`${h}/upload`,handler:"localazyTransferController.upload",config:{policies:[]}},{method:"POST",path:`${h}/download`,handler:"localazyTransferController.download",config:{policies:[]}}]},74452:u=>{"use strict";const h="/user";u.exports=[{method:"GET",path:`${h}`,handler:"localazyUserController.getUser",config:{policies:[]}},{method:"PUT",path:`${h}`,handler:"localazyUserController.updateUser",config:{policies:[]}},{method:"DELETE",path:`${h}`,handler:"localazyUserController.deleteUser",config:{policies:[]}}]},70883:u=>{"use strict";const h="/plugin-settings";u.exports=[{method:"GET",path:`${h}/content-transfer-setup`,handler:"pluginSettingsController.getContentTransferSetup",config:{policies:[]}},{method:"PUT",path:`${h}/content-transfer-setup`,handler:"pluginSettingsController.updateContentTransferSetup",config:{policies:[]}},{method:"GET",path:`${h}/plugin-settings`,handler:"pluginSettingsController.getPluginSettings",config:{policies:[]}},{method:"PUT",path:`${h}/plugin-settings`,handler:"pluginSettingsController.updatePluginSettings",config:{policies:[]}}]},53480:u=>{"use strict";const h="/strapi";u.exports=[{method:"GET",path:`${h}/models`,handler:"strapiController.getModels",config:{policies:[]}},{method:"GET",path:`${h}/localizable-models`,handler:"strapiController.getLocalizableModels",config:{policies:[]}},{method:"POST",path:`${h}/lifecycle/localazy-webhooks`,handler:"strapiController.postLifecycleLocalazyWebhooks",config:{policies:[]}}]},7106:u=>{"use strict";class h{constructor(e){this.strapi=e,this.pluginSettingsService=e.plugin("localazy").service("pluginSettingsService")}async setup(){this.pluginSettings=await this.pluginSettingsService.getPluginSettings()}shouldAllowAutomatedUpload(){return typeof this.pluginSettings?.upload?.allowAutomated=="boolean"?this.pluginSettings.upload.allowAutomated:!1}shouldAllowAutomatedCreatedTrigger(){const e=this.getAutomatedUploadTriggers();return this.shouldAllowAutomatedUpload()&&e.includes("created")}shouldAllowAutomatedUpdatedTrigger(){const e=this.getAutomatedUploadTriggers();return this.shouldAllowAutomatedUpload()&&e.includes("updated")}getAutomatedUploadTriggers(){return this.pluginSettings?.upload?.automatedTriggers||[]}shouldAllowDeprecateOnDeletion(){return typeof this.pluginSettings?.upload?.allowDeprecate=="boolean"?this.pluginSettings.upload.allowDeprecate:!1}shouldAllowWebhookDownloadProcess(){return typeof this.pluginSettings?.download?.processDownloadWebhook=="boolean"?this.pluginSettings.download.processDownloadWebhook:!0}getWebhookAuthorId(){return this.pluginSettings?.download?.webhookAuthorId||null}getWebhookLanguagesCodes(){return this.pluginSettings?.download?.webhookLanguages||[]}getUiLanguagesCodes(){return this.pluginSettings?.download?.uiLanguages||[]}}u.exports=h},22592:(u,h,n)=>{"use strict";const e=n(11123),c=n(81593),g=n(8337),p=n(56591),i=n(47840),a=n(27988),r=n(80372),s=n(65042),o=n(39086);u.exports={localazyUserService:e,localazyAuthService:c,strapiService:g,pluginSettingsService:p,localazyUploadService:i,localazyDownloadService:a,localazyPubApiService:r,strapiI18nService:s,strapiLocalazyI18nService:o}},81593:(u,h,n)=>{"use strict";const e=n(97218),c=n(90032),g=c.default.LOCALAZY_PLUGIN_CONNECTOR_API_URL,p=c.default.LOCALAZY_PLUGIN_ID;u.exports=()=>({async generateKeys(){try{return(await e.get(`${g}/public/keys`,{headers:{"X-Localazy-Plugin-Id":p}})).data}catch(i){throw i.data}},async completeLogin(i){try{return(await e.get(`${g}/oauth/poll?readKey=${i}`,{headers:{"X-Localazy-Plugin-Id":p}})).data}catch(a){throw a.data}}})},27988:(u,h,n)=>{"use strict";const e=n(828),c=n(48883),g=async(p,i,a,r)=>{try{return await(await e()).listKeysInFileForLanguage({projectId:p,fileId:i,lang:a,next:r})}catch(s){return strapi.log.error(s),{keys:[]}}};u.exports=({strapi:p})=>({async download(i={}){try{const a=[];let r;do{const s=r&&r.next||"";r=await g(i.projectId,i.fileId,i.lang,s),await c(),a.push(r)}while(r.next);return{success:!0,data:a.map(s=>s.keys).flat()}}catch(a){return p.log.error(a),{success:!1,message:a.message}}}})},80372:(u,h,n)=>{"use strict";const e=n(828),c=n(90032).default;u.exports=({strapi:g})=>({async listFiles(p){try{return await(await e()).listFiles({projectId:p})}catch(i){return g.console.error(i),[]}},async getStrapiFile(p){return(await this.listFiles(p)).find(r=>r.type===c.LOCALAZY_DEFAULT_FILE_EXTENSION&&r.name===c.LOCALAZY_DEFAULT_FILE_NAME)},async listProjects(p=!0,i=!0){try{return await(await e()).listProjects({organization:p,languages:i})}catch(a){return g.console.error(a),[]}},async getProject(p,i=!0,a=!0){return(await this.listProjects(i,a)).find(s=>s.id===p)},async getWebhooksSecret(p){return await(await e()).getWebhooksSecret({projectId:p})}})},47840:(u,h,n)=>{"use strict";const e=n(828),c=n(48883),g=n(90032).default;u.exports=({strapi:p})=>({async upload(i,a={}){let r={success:!1,message:"No data was uploaded"};try{for(const s of i){const o=await e(),t=await p.plugin("localazy").service("localazyUserService").getUser(),l=await o.import({projectId:t.project.id,files:s,...a});await c(),r={success:!0,result:l.result}}return r}catch(s){return p.log.error(s),{success:!1,message:s.message}}},CHUNK_LIMIT:g.LOCALAZY_PUBLIC_API_LIFTED_LIMITS?99900:9990,splitToChunks(i,a=null){const r=[],s=Object.keys(i),o=s.length,t=a||this.CHUNK_LIMIT,l=Math.ceil(o/t);for(let d=0;d<l;d+=1){const m={},L=t*d,E=t*(d+1);s.slice(L,E).forEach(A=>{m[A]=i[A]}),r.push(m)}return r},createImportFileRepresentation(i,a,r,s,o){const t=[];for(const l of o){const d=[{name:i,path:a,content:{type:r,[s]:{...l}}}];t.push(d)}return t}})},11123:(u,h,n)=>{"use strict";const{KEY:e,emptyIdentity:c}=n(89190),g=n(20752);u.exports=({strapi:p})=>({async getUser(){return await g(p).get({key:e})},async updateUser(i){return await g(p).set({key:e,value:i}),i},async deleteUser(){return await this.updateUser(c),c}})},56591:(u,h,n)=>{"use strict";const e=n(69164),c=n(14829),g=n(20752);u.exports=({strapi:p})=>({async getContentTransferSetup(){return await g(p).get({key:e.KEY})||e.emptyContentTransferSetup},async updateContentTransferSetup(i){const a={has_setup:!0,setup:i};return await g(p).set({key:e.KEY,value:a}),a},async getPluginSettings(){return await g(p).get({key:c.KEY})||c.emptyPluginSettings},async updatePluginSettings(i){const r={...await this.getPluginSettings(),...i};return await g(p).set({key:c.KEY,value:r}),r}})},65042:(u,h,n)=>{"use strict";const{isoLocalazyToStrapi:e}=n(90254),c=n(39309),g=n(82492),p=n(50361),i=n(62243);u.exports=({strapi:a})=>({async getLocales(r={}){return await a.controller("plugin::i18n.locales").listLocales(r),r.body},async createStrapiLocale(r,s){try{const o=e(s);let t=c(o);if(!t||!o)throw new Error("Invalid locale");t=`${t} (${o})`;const l={...r};return l.request.body={isDefault:!1,code:o,name:t.substring(0,50)},await a.controller("plugin::i18n.locales").createLocale(l),o}catch(o){throw a.log.error(o),o}},parseLocalazyKey(r){const o=r.split(/\.(?![^[]*])|\[|\]/).filter(t=>t!=="");return{uid:`${o[0]}.${o[1]}`,id:o[2],rest:o.slice(3)}},async getEntryInLocale(r,s,o,t="*"){const l=a.plugin("localazy").service("strapiService"),d=await a.entityService.findOne(r,s,{populate:t}),m=d.localizations;if(d.locale===o)return d;if(Array.isArray(m)){const L=m.find(E=>E.locale===o);if(L){const E=await l.getPopulateObject(r);return this.getEntryInLocale(r,L.id,o,E)}}return null},async createLocalizationForAnExistingEntry(r,s,o,t){try{const l=a.controller(s),d={...r};d.is=()=>!1,d.params.id=o.id;const m=t.locale,L=i(t,["locale","id","createdAt","updatedAt"]);L.locale=m,L.publishedAt=null,d.request.body=L,await l.createLocalization(d);const E=await this.getEntryInLocale(s,o.id,m);return g(p(o),E)}catch(l){throw a.log.error(l),l}},async updateLocalizationForAnExistingEntry(r,s,o){try{const l=await a.plugin("localazy").service("strapiService").getPopulateObject(r);return await a.entityService.update(r,s,{data:o,populate:l})}catch(t){throw a.log.error(t),t}}})},39086:(u,h,n)=>{"use strict";const e=n(41523),c=n(69265);u.exports=({strapi:g})=>({async createEntry(p,i,a,r,s,o){const t=g.plugin("localazy").service("strapiI18nService"),{createEntry:l}=e(a,r,s,i,o),d=await t.createLocalizationForAnExistingEntry(p,i,s,l);return await this.updateEntry(i,d.id,a,r,s,o),d},async updateEntry(p,i,a,r,s,o){const t=g.plugin("localazy").service("strapiService"),l=g.plugin("localazy").service("strapiI18nService"),d=await t.getPopulateObject(p),m=await g.entityService.findOne(p,i,{populate:d}),L=await g.entityService.findOne(p,i,{populate:"deep"}),E=await c(a,r,L,m,s,p,o);return await l.updateLocalizationForAnExistingEntry(p,i,E)}})},8337:(u,h,n)=>{"use strict";const e=n(23332),c=n(36802),g=n(6711);u.exports=({strapi:p})=>({async getModels(){return p.db.config.models.filter(i=>c(i))},async getLocalizableModels(){return p.db.config.models.filter(i=>e(i))},async getPopulateObject(i){const a=p.db.config.models;return g(a,i)}})},6711:(u,h,n)=>{"use strict";const e=n(36968),c=p=>{const i={};for(const a of p)e(i,a,"*");return i},g=(p,i)=>{const a=(s,o,t="")=>{const l=s.find(d=>d.uid===o);if(!l||!l.attributes)return c(r);for(const[d,m]of Object.entries(l.attributes))if(m.type==="component"){const L=t?`${t}.${d}.populate`:`${d}.populate`;r.push(L);const E=t?`${t}.${d}`:`${d}`,I=m.component;a(s,I,E)}else if(m.type==="dynamiczone"){const L=t?`${t}.${d}.populate`:`${d}.populate`;r.push(L)}return c(r)},r=["populate"];return a(p,i)};u.exports=g},48883:u=>{"use strict";const h=(n=150)=>new Promise(e=>setTimeout(e,n));u.exports=h},1409:u=>{"use strict";const h=(n,e="")=>{const c={};for(const g in n)if(g!=="id")if(typeof n[g]!="object"){const p=e?`${e}.${g}`:g;c[p]=n[g]}else{let p;if(Array.isArray(n[g])){const i=n[g].reduce((a,r,s)=>(a[`${g}[${r.id||s}]`]=h(r),a),{});p=h(i)}else{const i=n[g]?.id?`${g}[${n[g].id}]`:g;p=h(n[g],i)}for(const i in p){const a=e?`${e}.${i}`:i;c[`${a}`]=p[i]}}return c};u.exports=h},19633:(u,h,n)=>{const e=n(41609),c=n(82492),g=i=>{if(i.uid==="plugin::upload.file"){const{related:a,...r}=i.attributes;return r}return i.attributes},p=(i,a=20)=>{if(a<=1)return!0;if(i==="admin::user")return;const r={},s=strapi.getModel(i);for(const[o,t]of Object.entries(g(s)))if(t)if(t.type==="component")r[o]=p(t.component,a-1);else if(t.type==="dynamiczone"){const l=t.components.reduce((d,m)=>{const L=p(m,a-1);return L===!0?d:c(d,L)},{});r[o]=e(l)?!0:l}else if(t.type==="relation"){const l=p(t.target,a-1);l&&(r[o]=l)}else t.type==="media"&&(r[o]=!0);return e(r)?!0:{populate:r}};u.exports=p},828:(u,h,n)=>{"use strict";const e=n(8641).default,{LOCALAZY_PUBLIC_API_URL:c}=n(90032).default;u.exports=async()=>{const g=await strapi.plugin("localazy").service("localazyUserService").getUser(),{accessToken:p}=g;if(!p)throw new Error("Localazy user is not logged in.");return e({projectToken:p,baseUrl:c})}},57810:u=>{"use strict";u.exports=h=>h.map(n=>Object.keys(n)[0])},28619:(u,h,n)=>{"use strict";const{isoStrapiToLocalazy:e}=n(90254),c=n(90032).default,g=n(62243),p=n(1409),i=n(67073),{findSetupModelByCollectionName:a,getPickPaths:r}=n(81980),s=n(7106),o=(d,m)=>{let L;const E=d.setup.find(I=>(L=Object.keys(I)[0],L===m));if(E)return!!E[L].__model__},t=async d=>{switch(d.action){case"afterCreate":case"afterUpdate":return[await strapi.entityService.findOne(d.model.uid,d.result.id,{populate:"deep"})];case"beforeDelete":return[await strapi.entityService.findOne(d.model.uid,d.params.where.id,{populate:"deep"})];case"beforeDeleteMany":{const m=await strapi.entityService.findMany(d.model.uid,{filters:d.params.where,populate:"deep"});return m.length===0&&strapi.log.info(`Localazy Plugin: No entries in source language for ${d.action} found; the operation won't proceed`),m}default:throw new Error("Unhandled event action")}},l=async d=>{const m=new s(strapi);switch(await m.setup(),d.action){case"afterCreate":return m.shouldAllowAutomatedCreatedTrigger()?!1:(strapi.log.info(`Localazy Plugin: Skipping ${d.action} hook because automated created trigger is disabled.`),!0);case"afterUpdate":return m.shouldAllowAutomatedUpdatedTrigger()?!1:(strapi.log.info(`Localazy Plugin: Skipping ${d.action} hook because automated update trigger is disabled.`),!0);case"beforeDelete":case"beforeDeleteMany":return m.shouldAllowDeprecateOnDeletion()?!1:(strapi.log.info(`Localazy Plugin: Skipping ${d.action} hook because deprecate on deletion is disabled.`),!0);default:throw new Error("Unhandled event action")}};u.exports=async d=>{const m=strapi.plugin("localazy").service("localazyUserService"),L=strapi.plugin("localazy").service("localazyPubApiService"),E=strapi.plugin("localazy").service("strapiI18nService"),I=await strapi.plugin("localazy").service("pluginSettingsService").getContentTransferSetup(),A=d.action;if(strapi.log.info(`${A} triggered`),!I.has_setup){strapi.log.warn("Localazy Plugin: Content Transfer Setup is not set up; the operation won't proceed");return}const T=d.model.tableName,S=o(I,T);if(typeof S>"u")return;if(!S){strapi.log.info("Localazy Plugin: The entry collection transfer is disabled");return}const b=await m.getUser(),{accessToken:k}=b;if(!k){strapi.log.error("Localazy Plugin: Localazy user is not logged in; the operation won't proceed");return}if(await l(d)){strapi.log.info("Localazy Plugin: Automated action skipped");return}const B=await L.getProject(b.project.id,!1,!0),Z=B.languages,z=B.sourceLanguage,H=Z.find(te=>te.id===z).code,D=(await E.getLocales()).find(te=>te.isDefault);if((D?e(D.code):c.LOCALAZY_DEFAULT_LOCALE)!==H){strapi.log.warn("Localazy Plugin: Source locales do not match; the operation won't proceed");return}const N=d.model.uid,C=await t(d);if(C.length===0)return;const x=C[0].locale;if(e(x)!==H){strapi.log.info("Localazy Plugin: Entry language is not in Localazy source language; the operation won't proceed");return}const j=g(C,["locale","localizations","createdAt","createdBy","updatedAt","updatedBy","publishedAt"]),G=a(I.setup,T)[T],R=r(G);if(!R.length){strapi.log.warn(`No fields for collection ${T} transfer are enabled.`);return}const ee=R.map(te=>`${N}.${te}`);let X={};for(const te of j)X={...X,...p({[N]:te})};return{pickedFlatten:i(X,ee,G),eventEntryLocale:x}}},39309:u=>{u.exports=h=>new Intl.DisplayNames(["en"],{type:"language"}).of(h)},36802:u=>{"use strict";const h=["contentType","component"],n=["strapi::core","plugin::users-permissions.user"];u.exports=e=>{for(const c of n)if(e.uid.includes(c))return!1;return!h.includes(e.modelType)||!e.__schema__?!1:e.pluginOptions&&e.pluginOptions["content-type-builder"]?e.pluginOptions["content-type-builder"].visible:!0}},23332:(u,h,n)=>{"use strict";const e=n(36802);u.exports=c=>{if(!e(c)||!c.pluginOptions||!c.pluginOptions)return!1;if(c.pluginOptions){if(!c.pluginOptions.i18n)return!1;if(c.pluginOptions.i18n)return c.pluginOptions.i18n.localized?c.pluginOptions.i18n.localized:!1}return!0}},90254:u=>{"use strict";const h=e=>{if(!e)return null;const c=e.split("-"),g=c[0];if(c.length===3){const a=c[1],r=c[2];return`${g}_${r}#${a}`}if(c.length===2){const a=c[1];return a.toUpperCase()===a?`${g}_${a}`:`${g}#${a}`}return e.replace("-","_")},n=e=>{if(!e)return null;const c=e.indexOf("#");if(c>-1){const p=e.substring(c+1),a=e.substring(0,c).split("_"),r=a[0],s=a[1];return s?`${r}-${p}-${s.toUpperCase()}`:`${r}-${p}`}return e.replace("_","-")};u.exports={isoStrapiToLocalazy:h,isoLocalazyToStrapi:n}},13642:(u,h,n)=>{"use strict";const e=n(41609),c=(s,o)=>e(s)?void 0:s.attributes[o],g=s=>s.type==="component",p=s=>s.type==="dynamiczone",i=s=>g(s)&&!!s.repeatable,a=s=>s.type==="relation"&&s.target!=="plugin::upload.file",r=(s,o)=>s.find(l=>l.uid===o);u.exports={getAttribute:c,isComponent:g,isDynamicZone:p,isRepeatable:i,isRelation:a,findModel:r}},62243:(u,h,n)=>{"use strict";const e=n(53888);function c(g,p){function i(a){a&&typeof a=="object"&&p.forEach(r=>{delete a[r]})}if(Array.isArray(g)){const a=[];for(const r of g)a.push(e(r,i));return a}return e(g,i)}u.exports=c},41523:(u,h,n)=>{"use strict";const e=n(36968),c=n(27361),g=n(93470),{getAttribute:p,isComponent:i,isDynamicZone:a,isRepeatable:r,findModel:s}=n(13642),o=(t,l,d,m,L="")=>{const E={},I=[],A=[],T=(b,k,B,Z="",z="",Y="",H=!1,F=!1)=>{Array.isArray(b)?Object.entries(b).forEach(([D,q])=>{if(q!==null){if(Y&&H){I.includes(z)||I.push(z);const N=parseInt(D),C=c(B,z);if(C!==void 0){const x=C.findIndex(j=>!!j&&j.id===N);x>-1&&T(q,k,B,x,`${z}.${x}`,Y)}}if(Y&&!H&&T(q,k,B,`${z}`,`${z}`),!Y&&H){I.includes(z)||I.push(z);const N=parseInt(D),C=c(B,z);if(C!==void 0){const x=C.findIndex(j=>!!j&&j.id===N);if(x>-1){const M=c(B,z).find(R=>R.id===N).__component,G=s(t,M);T(q,G,B,x,`${z}.${x}`,M,!0,!0)}}}}}):Object.entries(b).forEach(([D,q])=>{const N=p(k,D);if(N!==void 0)if(i(N)){const C=N.component,x=s(t,C);if(r(N)){const j=z?`${z}.${D}`:`${D}`;T(q,x,B,D,j,C,!0)}else{const j=z?`${z}.${D}`:`${D}`;e(E,`${j}.__component`,C),T(q,x,B,D,j,C,!1)}}else if(a(N)){const C=z?`${z}.${D}`:`${D}`;T(q,null,B,D,C,"",!0,!0)}else{const C=z?`${z}.${D}`:`${D}`;if(e(E,C,q),Y){const x=`${z}.__component`;e(E,x,Y),F&&(typeof A.find(M=>M.key===x)<"u"||A.push({key:x,component:Y}))}}})},S=s(t,m);return T(l,S,d),L&&(E.locale=L),g(E,I),{createEntry:E,dynamicZoneComponentKeys:A}};u.exports=o},69265:(u,h,n)=>{"use strict";const e=n(82492),c=n(41523),g=n(62243),p=n(196),{set:i}=n(96486),a=async(r,s,o,t,l,d,m)=>{const{createEntry:L,dynamicZoneComponentKeys:E}=c(r,s,l,d);let I={};e(I,t,L),I=g(I,["__component","locale","localizations","createdAt","createdBy","updatedAt","updatedBy","publishedAt"]),E.forEach(b=>{i(I,b.key,b.component)});const A=g(l,["locale","localizations","createdAt","createdBy","updatedAt","updatedBy","publishedAt"]),T=g(o,["locale","localizations","createdAt","createdBy","updatedAt","updatedBy","publishedAt"]);return await p(r,I,A,T,d,m)};u.exports=a},93022:(u,h,n)=>{"use strict";const e=n(13218),c=n(36968),g=n(64721),p=(i,a,r={},s=[])=>{for(let o in i){const t=i[o];e(t)?(s.push(o),p(t,a,r,s),s.pop()):g(a,o)&&c(r,[...s,o],t)}return r};u.exports=p},67073:(u,h,n)=>{"use strict";const e=n(35161),c=n(93022),g=n(1409),p=(o,t)=>{const l=o.match(/\[\d+\]+/g);if(l.length<2)return!1;const d=l[1],L=o.split(".").find((E,I)=>I>1&&E.includes(d)).replace(d,"");return Array.isArray(t[L])},i=(o,t)=>p(o,t)?o.match(/\[\d+\]+/g)[1].replace(/[\[\]']+/g,""):void 0,a=(o,t)=>p(o,t)?o.split(".")[2]:void 0,r=(o,t)=>o.some(l=>l.includes(t)),s=(o,t,l)=>{const d={},m=Object.fromEntries(Object.entries(o).filter(([S])=>S.includes("__component"))),L=c(l,["__component__"]),E=g(L);e(E,(S,b)=>{const k=b.replace(".__component__","");E[k]=S,delete E[b]}),Object.keys(m).map(S=>{if(!p(S,l))return;const b=S.replace(".__component","").split("."),k=b[b.length-1].replace(/\[.*\]/g,""),B=a(S,l),Z=Object.keys(E).filter(z=>z.replace(/\[.*\]/g,"")==k).find(z=>E[z]===m[S]);d[B]={component:m[S],key:Z}});const I={},A=t.map(S=>S.replace(/\[\d+\]/g,"")),T=Object.fromEntries(Object.entries(o).filter(([S])=>!S.includes("__component")));return Object.keys(T).forEach(S=>{const b=p(S,l);if(b){const B=a(S,l),Z=d[B].key;if(!r(t,Z))return}const k=S.replace(/\[\d+\]/g,"");if(A.includes(k))if(b){const B=i(S,l),Z=a(S,l),z=d[Z].key,Y=z.substring(0,z.indexOf("[")),H=`${Y}[${B}]`,F=d[Z].component,D=`${Y}[${B};${F}]`,q=S.replace(H,D);I[q]=o[S]}else I[S]=o[S]}),I};u.exports=s},196:(u,h,n)=>{"use strict";const e=n(50361),c=n(36968),g=n(27361),p=n(41609),{getAttribute:i,isComponent:a,isRepeatable:r,isDynamicZone:s,isRelation:o,findModel:t}=n(13642),l=L=>{if(Array.isArray(L))return!!L.length;if(typeof L=="object")return!p(L);if(L!==Object(L))return!!L},d=(L,E)=>E?`${E}.${L}`:L,m=async(L,E,I,A,T,S)=>{const b=e(E),k=async(Z,z,Y="",H="",F="",D=!1,q=!1)=>{if(Array.isArray(Z))if(typeof i(z,Y)<"u"){const C=d(Y,H);if(typeof g(E,C)>"u"){const M=g(A,C);l(M)?c(b,C,M):c(b,C,Z)}else for(const[M,G]of Object.entries(entry))await k(G,z,M,C)}else!F&&D&&q?Object.entries(Z).forEach(async([C,x])=>{const j=x.__component,M=t(L,j),G=`${H}.${C}`;await k(x,M,C,G)}):F&&D&&Object.entries(Z).forEach(async([C,x])=>{const j=`${H}.${C}`;await k(x,z,C,j)});else if(typeof Z=="object"){Z===null&&(Z={});for(const[N,C]of Object.entries(Z)){const x=i(z,N);if(typeof x>"u"&&N==="__component"){const j=d(N,H);c(b,j,C)}else{if(typeof x>"u")continue;if(a(x)){const j=x.component,M=t(L,j),G=d(N,H),R=g(E,G);let ee;if(r(x)?ee=!!(typeof R>"u"||R&&!R.length):ee=typeof R>"u"||R===null,ee){const X=g(A,G);let ne=C;l(X)&&(ne=X),r(x)?ne=C.map(te=>(delete te.id,{__component:j,...te})):p(ne)||(delete ne.id,ne.__component=j),c(b,G,ne)}await k(C,M,N,G,j,r(x))}else if(s(x)){const j=d(N,H),M=g(E,j);if(!!(typeof M>"u"||M&&!M.length)){const R=g(A,j);let ee=C;l(R)&&(ee=R),ee=C.map(X=>(delete X.id,{__component:F,...X})),c(b,j,ee)}await k(C,"",N,j,"",!0,!0)}else if(o(x)){const j=d(N,H),M=g(A,j);if(l(M))continue;const G=Array.isArray(C);let R=C;G||(R=[C]);for(const[ee,X]of Object.entries(R))if(!p(X)){const ne=X.id;if(ne){const ae=(await strapi.entityService.findOne(x.target,ne,{populate:["localizations"]})).localizations.find(U=>U.locale===S);ae&&ae.id&&(G?c(b,`${j}.${ee}`,{id:ae.id}):c(b,j,{id:ae.id}))}}}else{const j=d(N,H),M=g(E,j);if(typeof M>"u"||M===null){const R=g(A,j);l(R)?c(b,j,R):c(b,j,C)}else await k(C,z,N,j)}}}}else if(Z!==Object(Z)){if(typeof i(z,Y)<"u"){const C=g(E,H);(typeof C>"u"||C===null)&&c(b,H,Z)}}else console.info(`Unknown type processed: ${Z}`)},B=t(L,T);return await k(I,B),b};u.exports=m},94743:u=>{"use strict";class h{constructor(e){this.strapi=e,this.ctx=e.requestContext.get()}isInitiatedByLocalazyWebhook(){if(typeof this.ctx<"u"){const e=this.ctx.headers,c=e["x-localazy-hmac"],g=e["x-localazy-timestamp"];if(c&&g)return!0}return!1}isInitiatedByLocalazyPluginUI(){if(typeof this.ctx<"u"){const c=this.ctx.headers["x-localazy-initiated-by"];return c?c==="strapi-plugin-localazy":!1}return!1}}u.exports=h},93470:(u,h,n)=>{const e=n(36968),c=n(27361),g=(p,i)=>{const a=i.sort((r,s)=>{const o=r.match(/\./g)?.length||0;return(s.match(/\./g)?.length||0)-o});for(const r of a){const o=c(p,r).filter(t=>t!==void 0);e(p,r,o)}};u.exports=g},81980:(u,h,n)=>{const e=n(57810),c=n(1409),g=(s,o)=>s.find(t=>Object.keys(t)[0]===o),p=(s,o,t)=>{const l=o.find(m=>m.uid===t);return l?s.setup.find(m=>Object.keys(m)[0]===l.collectionName)[l.collectionName]:void 0},i=s=>e(s),a=(s,o)=>{const t=g(s,o);return!t||!t[o]?!1:!!t[o].__model__},r=s=>{const o=c(s),t=Object.keys(o).filter(l=>o[l]===!0&&l.indexOf("__model__")===-1);return t.push("id"),t};u.exports={findSetupModelByCollectionName:g,findSetupModelByCollectionUid:p,getCollectionsNames:i,isCollectionTransferEnabled:a,getPickPaths:r}},89881:(u,h,n)=>{var e=n(47816),c=n(99291),g=c(e);u.exports=g},69199:(u,h,n)=>{var e=n(89881),c=n(98612);function g(p,i){var a=-1,r=c(p)?Array(p.length):[];return e(p,function(s,o,t){r[++a]=i(s,o,t)}),r}u.exports=g},47415:(u,h,n)=>{var e=n(29932);function c(g,p){return e(p,function(i){return g[i]})}u.exports=c},99291:(u,h,n)=>{var e=n(98612);function c(g,p){return function(i,a){if(i==null)return i;if(!e(i))return g(i,a);for(var r=i.length,s=p?r:-1,o=Object(i);(p?s--:++s<r)&&a(o[s],s,o)!==!1;);return i}}u.exports=c},53888:(u,h,n)=>{var e=n(85990),c=1,g=4;function p(i,a){return a=typeof a=="function"?a:void 0,e(i,c|g,a)}u.exports=p},64721:(u,h,n)=>{var e=n(42118),c=n(98612),g=n(47037),p=n(40554),i=n(52628),a=Math.max;function r(s,o,t,l){s=c(s)?s:i(s),t=t&&!l?p(t):0;var d=s.length;return t<0&&(t=a(d+t,0)),g(s)?t<=d&&s.indexOf(o,t)>-1:!!d&&e(s,o,t)>-1}u.exports=r},47037:(u,h,n)=>{var e=n(44239),c=n(1469),g=n(37005),p="[object String]";function i(a){return typeof a=="string"||!c(a)&&g(a)&&e(a)==p}u.exports=i},35161:(u,h,n)=>{var e=n(29932),c=n(67206),g=n(69199),p=n(1469);function i(a,r){var s=p(a)?e:g;return s(a,c(r,3))}u.exports=i},52628:(u,h,n)=>{var e=n(47415),c=n(3674);function g(p){return p==null?[]:e(p,c(p))}u.exports=g}}]);
